(self.webpackChunk=self.webpackChunk||[]).push([[483],{1698:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(5166);const r={class:"w-lg-100 d-flex justify-content-center mt-lg-5"},a=(0,n.createVNode)("h3",null,"No data found",-1);const c={render:function(e,t,o,c,l,i){return(0,n.openBlock)(),(0,n.createBlock)("div",r,[a])}},l=c},8760:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>ut});var n=o(5166);const r={class:"container-fluid flex-grow-1 container-p-y"},a=(0,n.createVNode)("h4",{class:"font-weight-bold py-3 mb-4"}," Companies ",-1),c={class:"d-flex mb-3 mt-2"},l=(0,n.createVNode)("i",{class:"opacity-75 ion ion-md-refresh icon-refresh"},null,-1),i={key:0,class:" table-responsive"},s={class:"datatables-demo table table-striped table-bordered"};const d=(0,n.createVNode)("tr",{class:"d-flex"},[(0,n.createVNode)("th",{class:"text-left font-weight-bold col-1 "},"Created"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-1 "},"Personnel"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-2"},"Name"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-4"},"Domain/Email"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-2"},"Manager"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-1"},"Applicants"),(0,n.createVNode)("th",{class:"text-left font-weight-bold col-1"},"Actions")],-1);const m={render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)("thead",null,[d])}},p=m,u=(0,n.createVNode)("tr",{class:"d-flex"},[(0,n.createVNode)("td",{class:"text-left font-weight-bold col-1"},"Created"),(0,n.createVNode)("td",{class:"text-left font-weight-bold col-2"},"Name"),(0,n.createVNode)("td",{class:"text-left font-weight-bold col-5"},"Domain/Email"),(0,n.createVNode)("td",{class:"text-left font-weight-bold col-2"},"Manager"),(0,n.createVNode)("td",{class:"text-left font-weight-bold col-1"},"Applicants"),(0,n.createVNode)("td",{class:"text-left font-weight-bold col-1"},"Rate")],-1);const f={render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)("thead",null,[u])}},y=f;var g=o(6564);const v={setup:function(){var e=(0,g.oR)();return{profileIsAdmin:(0,n.computed)((function(){return"admin"===e.getters.getProfile.role})),profileIsPersonnel:(0,n.computed)((function(){return"personnel"===e.getters.getProfile.role})),profileIsHr:(0,n.computed)((function(){return"hr"===e.getters.getProfile.role||"top hr"===e.getters.getProfile.role}))}},components:{AdminHead:p,HrHead:y},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("HrHead"),i=(0,n.resolveComponent)("AdminHead");return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[r.profileIsHr?((0,n.openBlock)(),(0,n.createBlock)(l,{key:0})):(0,n.createCommentVNode)("",!0),r.profileIsPersonnel||r.profileIsAdmin?((0,n.openBlock)(),(0,n.createBlock)(i,{key:1})):(0,n.createCommentVNode)("",!0)],64)}},b=v;const h={class:"odd gradeX d-flex"},N={class:"col-1 pr-0"},V={class:"col-1"},k={class:"col-2"},C={class:"col-4 d-flex flex-column"},w={class:"col-2"},B={class:"col-1"},x=(0,n.createVNode)("i",null,"total:",-1),j=(0,n.createTextVNode)(),O=(0,n.createVNode)("i",null,"exported:",-1),F=(0,n.createTextVNode)(),P={key:0},D=(0,n.createVNode)("span",null,"rate:",-1),S=(0,n.createTextVNode)(),_={key:1},E={class:"d-flex col-1 justify-content-between align-items-center "};var A=o(7757),I=o.n(A);function T(e,t,o,n,r,a,c){try{var l=e[a](c),i=l.value}catch(e){return void o(e)}l.done?t(i):Promise.resolve(i).then(n,r)}function R(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function c(e){T(a,n,r,c,l,"next",e)}function l(e){T(a,n,r,c,l,"throw",e)}c(void 0)}))}}const U={setup:function(e){var t=(0,g.oR)(),o=(0,n.inject)("emitter"),r=(0,n.inject)("container"),a="delete-company-"+e.company.id;function c(){return(c=R(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={message:s(),event_id:a,action:"deleted"},o.emit("show-delete-modal",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return i.apply(this,arguments)}function i(){return(i=R(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.CompanyService.deleteCompany(e.company);case 3:o.emit("notification-success"," company "+e.company.name+" was deleted"),t.dispatch("company/deleteCompany",e.company),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),o.emit("notification-error",n.t0.response.data);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}function s(){return"You want to delete company: <strong>"+e.company.name+"</strong>"}return o.on(a,l),(0,n.onBeforeUnmount)((function(){return o.off(a,l)})),{deleteWarning:function(){return c.apply(this,arguments)},deleteEventId:a}},props:{company:Object},render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)("a",{"data-toggle":"modal","data-target":"#deleteForm",onClick:t[1]||(t[1]=(...e)=>r.deleteWarning(...e)),type:"button",class:"ion ion-md-trash danger"})}},Z=U,H={"data-toggle":"modal","data-target":"#editCompanyForm"};const z={setup:function(e){var t=(0,n.inject)("emitter");return{showEditCompanyForm:function(){return t.emit("edit-company-form",e.company)}}},props:{company:Object},render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)("a",H,[(0,n.createVNode)("button",{type:"button",class:"ion ion-md-cog p-0 bg-transparent border-0","data-toggle":"tooltip","data-target":"#editCompanyForm","data-placement":"right",title:"Edit",onClick:t[1]||(t[1]=(...e)=>r.showEditCompanyForm(...e))})])}},M=z,q={props:{company:Object},components:{DeleteButton:Z,EditButton:M},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("EditButton"),i=(0,n.resolveComponent)("DeleteButton");return(0,n.openBlock)(),(0,n.createBlock)("tr",h,[(0,n.createVNode)("td",N,(0,n.toDisplayString)(o.company.created_at),1),(0,n.createVNode)("td",V,(0,n.toDisplayString)(o.company.personnel.login),1),(0,n.createVNode)("td",k,(0,n.toDisplayString)(o.company.name),1),(0,n.createVNode)("td",C,[(0,n.createVNode)("a",{href:o.company.domain},(0,n.toDisplayString)(o.company.domain),9,["href"]),(0,n.createVNode)("div",null,(0,n.toDisplayString)(o.company.email),1)]),(0,n.createVNode)("td",w,(0,n.toDisplayString)(o.company.pseudonym),1),(0,n.createVNode)("td",B,[(0,n.createVNode)("div",null,[x,j,(0,n.createVNode)("span",null,(0,n.toDisplayString)(o.company.employees_count),1)]),(0,n.createVNode)("div",null,[O,F,(0,n.createVNode)("span",null,(0,n.toDisplayString)(o.company.exported_employees_count),1)]),0!==o.company.exported_employees_count?((0,n.openBlock)(),(0,n.createBlock)("div",P,[D,S,(0,n.createVNode)("span",null,(0,n.toDisplayString)((o.company.exported_employees_count/o.company.employees_count*100).toFixed(2))+"%",1)])):((0,n.openBlock)(),(0,n.createBlock)("div",_,"rate: 0%"))]),(0,n.createVNode)("td",E,[(0,n.createVNode)(l,{company:o.company},null,8,["company"]),(0,n.createVNode)(i,{company:o.company},null,8,["company"])])])}},$=q,W={class:"odd gradeX d-flex"},L={class:"col-1 pr-0"},X={class:"col-2"},Y={class:"col-5 d-flex flex-column"},G={class:"col-2"},J={class:"col-1"},K=(0,n.createVNode)("i",null,"total:",-1),Q=(0,n.createTextVNode)(),ee=(0,n.createVNode)("i",null,"hired:",-1),te=(0,n.createTextVNode)(),oe={class:"col-1"},ne={key:0},re=(0,n.createVNode)("span",null,"rate:",-1),ae=(0,n.createTextVNode)(),ce={key:1};const le={props:{company:Object},components:{DeleteButton:Z,EditButton:M},render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)("tr",W,[(0,n.createVNode)("td",L,(0,n.toDisplayString)(o.company.created_at),1),(0,n.createVNode)("td",X,(0,n.toDisplayString)(o.company.name),1),(0,n.createVNode)("td",Y,[(0,n.createVNode)("a",{href:o.company.domain},(0,n.toDisplayString)(o.company.domain),9,["href"]),(0,n.createVNode)("div",null,(0,n.toDisplayString)(o.company.email),1)]),(0,n.createVNode)("td",G,(0,n.toDisplayString)(o.company.pseudonym),1),(0,n.createVNode)("td",J,[(0,n.createVNode)("div",null,[K,Q,(0,n.createVNode)("span",null,(0,n.toDisplayString)(o.company.employees_count),1)]),(0,n.createVNode)("div",null,[ee,te,(0,n.createVNode)("span",null,(0,n.toDisplayString)(o.company.good_employees_count),1)])]),(0,n.createVNode)("td",oe,[0!==o.company.good_employees_count?((0,n.openBlock)(),(0,n.createBlock)("div",ne,[re,ae,(0,n.createVNode)("span",null,(0,n.toDisplayString)((o.company.good_employees_count/o.company.employees_count*100).toFixed(2))+"%",1)])):((0,n.openBlock)(),(0,n.createBlock)("div",ce,"rate: 0%"))])])}},ie={setup:function(){var e=(0,g.oR)();return{profile:(0,n.computed)((function(){return e.getters.getProfile})),profileIsAdmin:(0,n.computed)((function(){return"admin"===e.getters.getProfile.role})),profileIsPersonnel:(0,n.computed)((function(){return"personnel"===e.getters.getProfile.role})),profileIsHr:(0,n.computed)((function(){return"hr"===e.getters.getProfile.role||"top hr"===e.getters.getProfile.role}))}},props:{company:Object},components:{AdminRow:$,HrRow:le},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("HrRow"),i=(0,n.resolveComponent)("AdminRow");return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[r.profileIsHr?((0,n.openBlock)(),(0,n.createBlock)(l,{key:0,company:o.company},null,8,["company"])):(0,n.createCommentVNode)("",!0),r.profileIsPersonnel||r.profileIsAdmin?((0,n.openBlock)(),(0,n.createBlock)(i,{key:1,company:o.company},null,8,["company"])):(0,n.createCommentVNode)("",!0)],64)}},se=ie,de={class:"modal fade",id:"addCompanyForm"},me={class:"modal-dialog"},pe={class:"modal-content"},ue=(0,n.createVNode)("div",{class:"modal-header"},[(0,n.createVNode)("h5",{class:"modal-title"}," Add company "),(0,n.createVNode)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},"×")],-1),fe={class:"modal-body"},ye={class:"modal-footer"},ge=(0,n.createVNode)("button",{id:"storeCompanyFormClose",type:"button",class:"btn btn-default","data-dismiss":"modal"}," Close ",-1);const ve={class:"form-row mb-2"},be={key:0,class:"form-group col mb-0 d-flex align-items-center justify-content-between flex-wrap"},he=(0,n.createVNode)("label",{class:"form-label col-md-2"},"Personnel",-1),Ne=(0,n.createVNode)("option",{disabled:"",selected:"",value:null}," -- select manager --",-1),Ve=(0,n.createVNode)("small",{class:"col-md-12 invalid-feedback text-right p-0"},"please select a personnel manager",-1),ke={class:"form-row mb-2"},Ce={class:"form-group col mb-0 d-flex align-items-center justify-content-between flex-wrap"},we=(0,n.createVNode)("label",{class:"form-label col-md-2"},"Name",-1),Be={class:" col-md-12 invalid-feedback text-right p-0"},xe={class:"form-row mb-2"},je={class:"form-group col mb-0 d-flex align-items-center justify-content-between flex-wrap"},Oe=(0,n.createVNode)("label",{class:"form-label col-md-2"},"Domain",-1),Fe={class:"col-md-12 invalid-feedback text-right p-0"},Pe={class:"form-row mb-2"},De={class:"form-group col mb-0 d-flex align-items-center justify-content-between flex-wrap"},Se=(0,n.createVNode)("label",{class:"form-label col-md-2"},"Manager",-1),_e={class:" col-md-12 invalid-feedback text-right p-0"},Ee={class:"form-row mb-2"},Ae={class:"form-group col mb-0 d-flex align-items-center justify-content-between flex-wrap"},Ie=(0,n.createVNode)("label",{class:"form-label col-md-2"},"Email",-1),Te={class:" col-md-12 invalid-feedback text-right p-0"};var Re=o(2954),Ue=o(7561);function Ze(e,t,o,n,r,a,c){try{var l=e[a](c),i=l.value}catch(e){return void o(e)}l.done?t(i):Promise.resolve(i).then(n,r)}function He(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function c(e){Ze(a,n,r,c,l,"next",e)}function l(e){Ze(a,n,r,c,l,"throw",e)}c(void 0)}))}}const ze={setup:function(e){var t=(0,g.oR)(),o=(0,n.inject)("emitter"),r=Ue.Ry({personnel:Ue.Z_().nullable().required(),email:Ue.Z_().nullable().required().email(),name:Ue.Z_().nullable().required().trim().matches("^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$","company name can contain only letters numbers and spaces"),manager:Ue.Z_().nullable().required().trim().matches("^[a-zA-Z ]*$","manager name can contain only letters"),domain:Ue.Z_().nullable().required().trim().matches("^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.[a-zA-Z]{2,}$","please enter valid domain")}),a=(0,Re.cI)({validationSchema:r.nullable()}),c=a.errors,l=a.validate,i=(0,Re.U$)("name",{value:(0,n.computed)((function(){return e.company.name}))}),s=(0,Re.U$)("manager",{value:(0,n.computed)((function(){return e.company.pseudonym}))}),d=(0,Re.U$)("email",{value:(0,n.computed)((function(){return e.company.email}))}),m=(0,Re.U$)("domain",{value:(0,n.computed)((function(){return e.company.domain}))}),p=(0,Re.U$)("personnel",{value:(0,n.computed)((function(){return e.company.personnel_id}))}),u=[{field:p,name:"personnel_id"},{field:i,name:"name"},{field:m,name:"domain"},{field:d,name:"email"},{field:s,name:"pseudonym"}],f=(0,Re.W6)();function y(){return(y=He(I().mark((function t(){var o;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.forEach((function(t){t.field.meta.dirty=!0,t.field.meta.touched=!0,t.field.value.value=e.company[t.name]})),t.next=3,l();case 3:if((o=t.sent).valid){t.next=6;break}throw{message:"Please fix form errors:",errors:Object.keys(o.errors).map((function(e){return[o.errors[e]]}))};case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){u.forEach((function(t){return t.field.value.value=e.company[t.name]}))}return o.on("edit-company-form",v),o.on("create-company-form",f),(0,n.onBeforeUnmount)((function(){o.off("edit-company-form",v),o.off("create-company-form",f)})),{name:i,email:d,domain:m,personnel:p,manager:s,errors:c,validate:function(){return y.apply(this,arguments)},personnels:(0,n.computed)((function(){return t.getters.getPersonnels})),profile:(0,n.computed)((function(){return t.getters.getProfile}))}},props:{company:Object},components:{Form:Re.l0,Field:Re.gN},render:function(e,t,o,r,a,c){return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[(0,n.createVNode)("div",ve,["admin"===r.profile.role?((0,n.openBlock)(),(0,n.createBlock)("div",be,[he,(0,n.withDirectives)((0,n.createVNode)("select",{class:["custom-select form-control form-control-sm col-md-10",{"is-invalid":!r.personnel.meta.valid&&r.personnel.meta.touched}],name:"personnel","onUpdate:modelValue":t[1]||(t[1]=e=>o.company.personnel_id=e),onFocus:t[2]||(t[2]=e=>r.personnel.meta.touched=!1),onChange:t[3]||(t[3]=(...e)=>r.personnel.handleChange(...e)),onBlur:t[4]||(t[4]=(...e)=>r.personnel.handleBlur(...e))},[Ne,((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(r.personnels,(e=>((0,n.openBlock)(),(0,n.createBlock)("option",{selected:o.company.personnel_id===e.id,value:e.id},(0,n.toDisplayString)(e.login),9,["selected","value"])))),256))],34),[[n.vModelSelect,o.company.personnel_id]]),Ve])):(0,n.createCommentVNode)("",!0)]),(0,n.createVNode)("div",ke,[(0,n.createVNode)("div",Ce,[we,(0,n.withDirectives)((0,n.createVNode)("input",{type:"text",class:["form-control col-md-10",{"is-invalid":!r.name.meta.valid&&r.name.meta.touched}],placeholder:"Name",name:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.company.name=e),onFocus:t[6]||(t[6]=e=>r.name.meta.touched=!1),onInput:t[7]||(t[7]=(...e)=>r.name.handleChange(...e)),onBlur:t[8]||(t[8]=(...e)=>r.name.handleBlur(...e))},null,34),[[n.vModelText,o.company.name]]),(0,n.createVNode)("small",Be,(0,n.toDisplayString)(r.errors.name||"name is required"),1)])]),(0,n.createVNode)("div",xe,[(0,n.createVNode)("div",je,[Oe,(0,n.withDirectives)((0,n.createVNode)("input",{type:"text",class:["form-control col-md-10",{"is-invalid":!r.domain.meta.valid&&r.domain.meta.touched}],placeholder:"Domain",name:"domain","onUpdate:modelValue":t[9]||(t[9]=e=>o.company.domain=e),onFocus:t[10]||(t[10]=e=>r.domain.meta.touched=!1),onInput:t[11]||(t[11]=(...e)=>r.domain.handleChange(...e)),onBlur:t[12]||(t[12]=(...e)=>r.domain.handleBlur(...e))},null,34),[[n.vModelText,o.company.domain]]),(0,n.createVNode)("small",Fe,(0,n.toDisplayString)(r.errors.domain||"domain is required"),1)])]),(0,n.createVNode)("div",Pe,[(0,n.createVNode)("div",De,[Se,(0,n.withDirectives)((0,n.createVNode)("input",{type:"text",class:["form-control col-md-10",{"is-invalid":!r.manager.meta.valid&&r.manager.meta.touched}],placeholder:"Manager name",name:"manager","onUpdate:modelValue":t[13]||(t[13]=e=>o.company.pseudonym=e),onFocus:t[14]||(t[14]=e=>r.manager.meta.touched=!1),onInput:t[15]||(t[15]=(...e)=>r.manager.handleChange(...e)),onBlur:t[16]||(t[16]=(...e)=>r.manager.handleBlur(...e))},null,34),[[n.vModelText,o.company.pseudonym]]),(0,n.createVNode)("small",_e,(0,n.toDisplayString)(r.errors.manager||"manager name is required"),1)])]),(0,n.createVNode)("div",Ee,[(0,n.createVNode)("div",Ae,[Ie,(0,n.withDirectives)((0,n.createVNode)("input",{type:"text",class:["form-control col-md-10",{"is-invalid":!r.email.meta.valid&&r.email.meta.touched}],placeholder:"Email",name:"email","onUpdate:modelValue":t[17]||(t[17]=e=>o.company.email=e),onFocus:t[18]||(t[18]=e=>r.email.meta.touched=!1),onInput:t[19]||(t[19]=(...e)=>r.email.handleChange(...e)),onBlur:t[20]||(t[20]=(...e)=>r.email.handleBlur(...e))},null,34),[[n.vModelText,o.company.email]]),(0,n.createVNode)("small",Te,(0,n.toDisplayString)(r.errors.email||"email is required"),1)])])],64)}},Me=ze;function qe(e,t,o,n,r,a,c){try{var l=e[a](c),i=l.value}catch(e){return void o(e)}l.done?t(i):Promise.resolve(i).then(n,r)}function $e(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function c(e){qe(a,n,r,c,l,"next",e)}function l(e){qe(a,n,r,c,l,"throw",e)}c(void 0)}))}}function We(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Le(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?We(Object(o),!0).forEach((function(t){Xe(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):We(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Xe(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const Ye={setup:function(){var e=(0,g.oR)(),t=(0,n.inject)("container"),o=(0,n.inject)("emitter"),r=(0,n.ref)(null),a=(0,n.computed)((function(){return e.getters.getProfile})),c=Le({},e.getters.getEmptyCompany);"personnel"===a.role&&(c.personnel_id=a.id);var l=(0,n.reactive)(Le({},c));function i(){return(i=$e(I().mark((function n(a){var c,l;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.value.validate();case 3:return n.next=5,t.CompanyService.storeCompany(a);case 5:c=n.sent,l=c.data.model,e.commit("company/setCompanyById",l),document.getElementById("storeCompanyFormClose").click(),o.emit("notification-success","company was created"),s(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),n.t0.response.data&&o.emit("notification-error",n.t0.response.data);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))).apply(this,arguments)}function s(){Object.keys(c).forEach((function(e){return l[e]=c[e]})),"personnel"===a.value.role&&(l.personnel_id=a.value.id,l.personnel=a.value,console.log(l.personnel.login))}return o.on("create-company-form",s),(0,n.onBeforeUnmount)((function(){return o.off("create-company-form",s)})),{storeCompany:function(e){return i.apply(this,arguments)},company:l,companyFields:r}},components:{CompanyFormFields:Me},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("CompanyFormFields");return(0,n.openBlock)(),(0,n.createBlock)("div",de,[(0,n.createVNode)("div",me,[(0,n.createVNode)("form",pe,[ue,(0,n.createVNode)("div",fe,[(0,n.createVNode)(l,{ref:"companyFields",company:r.company},null,8,["company"])]),(0,n.createVNode)("div",ye,[ge,(0,n.createVNode)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>r.storeCompany(r.company))},"Add ")])])])])}},Ge=Ye,Je={class:"modal fade",id:"editCompanyForm"},Ke={class:"modal-dialog"},Qe={class:"modal-content"},et=(0,n.createVNode)("div",{class:"modal-header"},[(0,n.createVNode)("h5",{class:"modal-title"},"Edit company"),(0,n.createVNode)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},"×")],-1),tt={class:"modal-body"},ot={class:"modal-footer"},nt=(0,n.createVNode)("button",{id:"editCompanyFormClose",type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close ",-1);function rt(e,t,o,n,r,a,c){try{var l=e[a](c),i=l.value}catch(e){return void o(e)}l.done?t(i):Promise.resolve(i).then(n,r)}function at(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var a=e.apply(t,o);function c(e){rt(a,n,r,c,l,"next",e)}function l(e){rt(a,n,r,c,l,"throw",e)}c(void 0)}))}}function ct(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function lt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(o),!0).forEach((function(t){it(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ct(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function it(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const st={setup:function(){var e=(0,g.oR)(),t=(0,n.inject)("emitter"),o=(0,n.inject)("container"),r=(0,n.ref)(null),a=(0,n.computed)((function(){return e.getters.getUsers})),c=(0,n.computed)((function(){return e.getters.getProfile})),l=lt({},e.getters.getEmptyCompany),i=(0,n.reactive)(lt({},l));function s(){return(s=at(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.value.validate();case 3:return n.next=5,o.CompanyService.updateCompany(i);case 5:"personnel"!==c.value.role&&(i.personnel=a.value[i.personnel_id]),e.commit("company/setCompanyById",i),t.emit("notification-success","company was updated"),document.getElementById("editCompanyFormClose").click(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),n.t0.response.data&&t.emit("notification-error",n.t0.response.data);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}function d(e){Object.keys(e).forEach((function(t){return i[t]=e[t]}))}return t.on("edit-company-form",d),(0,n.onBeforeUnmount)((function(){return t.off("edit-company-form",d)})),{company:i,companyFields:r,updateCompany:function(){return s.apply(this,arguments)}}},components:{CompanyFormFields:Me},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("CompanyFormFields");return(0,n.openBlock)(),(0,n.createBlock)("div",Je,[(0,n.createVNode)("div",Ke,[(0,n.createVNode)("form",Qe,[et,(0,n.createVNode)("div",tt,[(0,n.createVNode)(l,{ref:"companyFields",company:r.company},null,8,["company"])]),(0,n.createVNode)("div",ot,[nt,(0,n.createVNode)("button",{onClick:t[1]||(t[1]=(0,n.withModifiers)(((...e)=>r.updateCompany(...e)),["prevent"])),type:"button",class:"btn btn-primary"},"Update")])])])])}},dt=st;const mt={setup:function(){var e=(0,g.oR)(),t=(0,n.inject)("emitter");return{profile:(0,n.computed)((function(){return e.getters.getProfile})),companies:(0,n.computed)((function(){return e.getters.getCompanies})),initializeCompanyStoreForm:function(){return t.emit("create-company-form")},refresh:function(){return e.dispatch("company/setCompaniesToStore")}}},components:{CompaniesTableHead:b,CompaniesTableRow:se,CreateCompanyForm:Ge,EditCompanyForm:dt,NoRecords:o(1698).Z},render:function(e,t,o,d,m,p){const u=(0,n.resolveComponent)("CompaniesTableHead"),f=(0,n.resolveComponent)("CompaniesTableRow"),y=(0,n.resolveComponent)("NoRecords");return(0,n.openBlock)(),(0,n.createBlock)("div",r,[a,(0,n.createVNode)("div",c,[(0,n.createVNode)("button",{onClick:t[1]||(t[1]=(...e)=>d.refresh(...e)),class:"btn btn-secondary",type:"button",title:"Refresh"},[l]),"admin"===d.profile.role||"personnel"===d.profile.role?((0,n.openBlock)(),(0,n.createBlock)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>d.initializeCompanyStoreForm(...e)),class:"btn btn-primary btn ml-2","data-toggle":"modal","data-target":"#addCompanyForm"},"Add company ")):(0,n.createCommentVNode)("",!0)]),Object.keys(d.companies).length>0?((0,n.openBlock)(),(0,n.createBlock)("div",i,[(0,n.createVNode)("table",s,[(0,n.createVNode)(u),(0,n.createVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(d.companies,(e=>((0,n.openBlock)(),(0,n.createBlock)(f,{company:e,key:e.id+e.name},null,8,["company"])))),128))])])])):((0,n.openBlock)(),(0,n.createBlock)(y,{key:1}))])}},pt={setup:function(){var e=(0,g.oR)(),t=0===Object.keys(e.getters.getCompanies).length,o=0===Object.keys(e.getters.getUsers).length,n=0===Object.keys(e.getters.getEmployees).length;t&&e.dispatch("company/setCompaniesToStore"),n&&e.dispatch("employee/setEmployeesToStore"),o&&e.dispatch("user/setUsersToStore")},components:{CompaniesTable:mt,CreateCompanyForm:Ge,EditCompanyForm:dt},render:function(e,t,o,r,a,c){const l=(0,n.resolveComponent)("CompaniesTable"),i=(0,n.resolveComponent)("CreateCompanyForm"),s=(0,n.resolveComponent)("EditCompanyForm");return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[(0,n.createVNode)(l),(0,n.createVNode)(i),(0,n.createVNode)(s)],64)}},ut=pt}}]);