(self.webpackChunk=self.webpackChunk||[]).push([[744],{1698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5166);const o={class:"w-lg-100 d-flex justify-content-center mt-lg-5"},a=(0,n.createVNode)("h3",null,"No data found",-1);const s={render:function(e,t,r,s,c,l){return(0,n.openBlock)(),(0,n.createBlock)("div",o,[a])}},c=s},3744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>se});var n=r(5166);const o={class:"container-fluid flex-grow-1 container-p-y"},a=(0,n.createVNode)("h4",{class:"font-weight-bold py-3 mb-4"},"Managers",-1),s={class:"d-flex mb-3"},c=(0,n.createVNode)("i",{class:"opacity-75 ion ion-md-refresh icon-refresh"},null,-1),l={key:0,class:"table-responsive d-flex align-items-start"};var i=r(1698);const u={class:"datatables-demo table table-striped table-bordered col-6"};const d=(0,n.createVNode)("tr",{class:"d-flex"},[(0,n.createVNode)("th",{class:"text-left col-3 font-weight-bold"},"Created"),(0,n.createVNode)("th",{class:"text-left col-4 font-weight-bold"},"Login"),(0,n.createVNode)("th",{class:"text-left col-3 font-weight-bold"},"Role"),(0,n.createVNode)("th",{class:"text-left col-2 font-weight-bold"},"Actions")],-1);const p={render:function(e,t,r,o,a,s){return(0,n.openBlock)(),(0,n.createBlock)("thead",null,[d])}},f=p,m={class:"col-3"},g={class:"col-4"},b={class:"col-3"},v={class:"d-flex col-2 justify-content-between align-items-center"};var h=r(7757),y=r.n(h),k=r(6564);function w(e,t,r,n,o,a,s){try{var c=e[a](s),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){w(a,n,o,s,c,"next",e)}function c(e){w(a,n,o,s,c,"throw",e)}s(void 0)}))}}const O={setup:function(e){var t=(0,k.oR)(),r=(0,n.inject)("emitter"),o=(0,n.inject)("container"),a="delete-user-"+e.user.id;function s(){return(s=N(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={message:i(),event_id:a,action:"deleted"},r.emit("show-delete-modal",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return l.apply(this,arguments)}function l(){return(l=N(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.UserService.deleteUser(e.user);case 3:r.emit("notification-success"," manager "+e.user.login+" was deleted"),t.dispatch("user/deleteUser",e.user),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0),r.emit("notification-error",n.t0.response.data);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}function i(){var t="You want to delete manager: ";return t=e.user.login?t+"<strong>"+e.user.login+"</strong>":t+"<strong>"+e.user.role+"</strong>"}return r.on(a,c),(0,n.onBeforeUnmount)((function(){return r.off(a,c)})),{deleteWarning:function(){return s.apply(this,arguments)}}},props:{user:Object},render:function(e,t,r,o,a,s){return(0,n.openBlock)(),(0,n.createBlock)("a",{"data-toggle":"modal","data-target":"#deleteForm",onClick:t[1]||(t[1]=(...e)=>o.deleteWarning(...e)),type:"button",class:"fas fa-trash-alt danger"})}},V=O,j=(0,n.createVNode)("a",{type:"button",class:"fas fa-user-edit p-0 bg-transparent border-0",title:"Edit","data-toggle":"tooltip","data-placement":"right"},null,-1);const B={setup:function(e){var t=(0,n.inject)("emitter");return{showEditManagerForm:function(){return t.emit("edit-manager-form",e.user)}}},props:{user:Object},render:function(e,t,r,o,a,s){return(0,n.openBlock)(),(0,n.createBlock)("a",{"data-toggle":"modal","data-target":"#editManagerForm",onClick:t[1]||(t[1]=(...e)=>o.showEditManagerForm(...e))},[j])}},F={setup:function(){var e=(0,k.oR)();return{profile:(0,n.computed)((function(){return e.getters.getProfile}))}},props:{user:Object},components:{DeleteButton:V,EditButton:B},render:function(e,t,r,o,a,s){const c=(0,n.resolveComponent)("EditButton"),l=(0,n.resolveComponent)("DeleteButton");return(0,n.openBlock)(),(0,n.createBlock)("tr",{class:["d-flex",{"d-none":r.user.login===o.profile.login}]},[(0,n.createVNode)("td",m,(0,n.toDisplayString)(r.user.created_at),1),(0,n.createVNode)("td",g,(0,n.toDisplayString)(r.user.login),1),(0,n.createVNode)("td",b,(0,n.toDisplayString)(r.user.role),1),(0,n.createVNode)("td",v,[(0,n.createVNode)(c,{user:r.user},null,8,["user"]),(0,n.createVNode)(l,{user:r.user},null,8,["user"])])],2)}},M={setup:function(){var e=(0,k.oR)();return{users:(0,n.computed)((function(){return e.getters.getUsers}))}},components:{ManagersTableHead:f,ManagersTableRow:F},render:function(e,t,r,o,a,s){const c=(0,n.resolveComponent)("ManagersTableHead"),l=(0,n.resolveComponent)("ManagersTableRow");return(0,n.openBlock)(),(0,n.createBlock)("table",u,[(0,n.createVNode)(c),(0,n.createVNode)("tbody",null,[((0,n.openBlock)(!0),(0,n.createBlock)(n.Fragment,null,(0,n.renderList)(o.users,(e=>((0,n.openBlock)(),(0,n.createBlock)(l,{key:e.id+e.login,user:e},null,8,["user"])))),128))])])}},C={setup:function(){var e=(0,k.oR)(),t=(0,n.inject)("emitter");return{showManagerStoreForm:function(){return t.emit("create-manager-form")},users:(0,n.computed)((function(){return e.getters.getUsers})),refresh:function(){return e.dispatch("user/setUsersToStore")}}},components:{Managers:M,NoRecords:i.Z},render:function(e,t,r,i,u,d){const p=(0,n.resolveComponent)("Managers"),f=(0,n.resolveComponent)("NoRecords");return(0,n.openBlock)(),(0,n.createBlock)("div",o,[a,(0,n.createVNode)("div",s,[(0,n.createVNode)("button",{onClick:t[1]||(t[1]=(...e)=>i.refresh(...e)),class:"btn btn-secondary",type:"button",title:"Refresh"},[c]),(0,n.createVNode)("button",{onClick:t[2]||(t[2]=(0,n.withModifiers)(((...e)=>i.showManagerStoreForm(...e)),["prevent"])),class:"btn btn-primary btn ml-2","data-toggle":"modal","data-target":"#addManagerForm"}," Add manager ")]),Object.keys(i.users).length>0?((0,n.openBlock)(),(0,n.createBlock)("div",l,[(0,n.createVNode)(p)])):((0,n.openBlock)(),(0,n.createBlock)(f,{key:1}))])}},x=C,P={class:"modal fade",id:"addManagerForm"},U={class:"modal-dialog"},E={class:"modal-content"},S=(0,n.createVNode)("div",{class:"modal-header"},[(0,n.createVNode)("h5",{class:"modal-title"}," Add manager "),(0,n.createVNode)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},"×")],-1),R={class:"modal-body"},D={class:"modal-footer"},T=(0,n.createVNode)("button",{id:"storeUserFormClose",type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close ",-1);var I=r(7076);function A(e,t,r,n,o,a,s){try{var c=e[a](s),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){A(a,n,o,s,c,"next",e)}function c(e){A(a,n,o,s,c,"throw",e)}s(void 0)}))}}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _={setup:function(){var e=(0,k.oR)(),t=(0,n.inject)("container"),r=(0,n.inject)("emitter"),o=(0,n.ref)(null),a=L({},e.getters.getEmptyUser),s=(0,n.reactive)(L({},a));function c(){return(c=Z(y().mark((function n(){var a;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.value.validate();case 3:return n.next=5,t.UserService.storeUser(s);case 5:a=n.sent,e.commit("user/setUserById",a.data.model),document.getElementById("storeUserFormClose").click(),r.emit("notification-success","manager was added"),l(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),n.t0.response.data&&r.emit("notification-error",n.t0.response.data);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}function l(){Object.keys(a).forEach((function(e){return s[e]=a[e]}))}return r.on("create-manager-form",l),(0,n.onBeforeUnmount)((function(){return r.off("create-manager-form",l)})),{manager:s,managerFields:o,storeManager:function(){return c.apply(this,arguments)}}},components:{ManagerFormFields:I.Z},render:function(e,t,r,o,a,s){const c=(0,n.resolveComponent)("ManagerFormFields");return(0,n.openBlock)(),(0,n.createBlock)("div",P,[(0,n.createVNode)("div",U,[(0,n.createVNode)("form",E,[S,(0,n.createVNode)("div",R,[(0,n.createVNode)(c,{ref:"managerFields",user:o.manager,"show-role-field":!0},null,8,["user"])]),(0,n.createVNode)("div",D,[T,(0,n.createVNode)("button",{onClick:t[1]||(t[1]=(0,n.withModifiers)(((...e)=>o.storeManager(...e)),["prevent"])),type:"button",class:"btn btn-primary"},"Add ")])])])])}},Y=_,q={class:"modal fade",id:"editManagerForm"},z={class:"modal-dialog"},G={class:"modal-content"},J=(0,n.createVNode)("div",{class:"modal-header"},[(0,n.createVNode)("h5",{class:"modal-title"}," Edit manager "),(0,n.createVNode)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},"×")],-1),K={class:"modal-body"},Q={class:"modal-footer"},X=(0,n.createVNode)("button",{id:"editUserFormClose",type:"button",class:"btn btn-default","data-dismiss":"modal"},"Close ",-1);function $(e,t,r,n,o,a,s){try{var c=e[a](s),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){$(a,n,o,s,c,"next",e)}function c(e){$(a,n,o,s,c,"throw",e)}s(void 0)}))}}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const oe={setup:function(){var e=(0,k.oR)(),t=(0,n.inject)("container"),r=(0,n.inject)("emitter"),o=(0,n.ref)(null),a=re({},e.getters.getEmptyUser),s=(0,n.reactive)(re({},a));function c(){return(c=ee(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.value.validate();case 3:return null!==s.password&&void 0!==s.password||delete s.password,delete s.dataIsValid,delete s.avatar,n.next=8,t.UserService.updateUser(s);case 8:e.commit("user/setUserById",s),r.emit("notification-success","manager was updated"),document.getElementById("editUserFormClose").click(),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0),n.t0.response.data&&r.emit("notification-error",n.t0.response.data);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))).apply(this,arguments)}function l(e){Object.keys(e).forEach((function(t){return s[t]=e[t]})),s.password=null}return r.on("edit-manager-form",l),(0,n.onBeforeUnmount)((function(){return r.off("edit-manager-form",l)})),{manager:s,managerFields:o,updateManager:function(){return c.apply(this,arguments)}}},components:{ManagerFormFields:I.Z},render:function(e,t,r,o,a,s){const c=(0,n.resolveComponent)("ManagerFormFields");return(0,n.openBlock)(),(0,n.createBlock)("div",q,[(0,n.createVNode)("div",z,[(0,n.createVNode)("form",G,[J,(0,n.createVNode)("div",K,[(0,n.createVNode)(c,{ref:"managerFields",user:o.manager,"show-role-field":!0},null,8,["user"])]),(0,n.createVNode)("div",Q,[X,(0,n.createVNode)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>o.updateManager(...e))},"Update ")])])])])}},ae={setup:function(){var e=(0,k.oR)(),t=0===Object.keys(e.getters.getUsers).length,r=0===Object.keys(e.getters.getCompanies).length,n=0===Object.keys(e.getters.getRoles).length,o=0===Object.keys(e.getters.getEmployees).length;r&&e.dispatch("company/setCompaniesToStore"),t&&e.dispatch("user/setUsersToStore"),o&&e.dispatch("employee/setEmployeesToStore"),n&&e.dispatch("user/setRolesToStore")},components:{ManagersTableBundle:x,StoreManagerForm:Y,EditManagerForm:oe},render:function(e,t,r,o,a,s){const c=(0,n.resolveComponent)("ManagersTableBundle"),l=(0,n.resolveComponent)("StoreManagerForm"),i=(0,n.resolveComponent)("EditManagerForm");return(0,n.openBlock)(),(0,n.createBlock)(n.Fragment,null,[(0,n.createVNode)(c),(0,n.createVNode)(l),(0,n.createVNode)(i)],64)}},se=ae}}]);